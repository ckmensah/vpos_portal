
<div>
  <br>
  <p id="notes1"><%#= notice %></p>
  <br>
  <div>
<!--    <div class="w3-half">-->
      <%#= link_to 'NEW', new_entity_info_path(count: params[:count], page: params[:page]), style: "width:120px;",
                  class: 'w3-button w3-purple-vpos w3-border w3-border-purple w3-small w3-round-large',remote:true %>
<!--    </div>-->
    <div class="">
      <%= select_tag :count, options_for_select([10,20,30,40,50], params[:count].to_i),
                     :data => {  :remote => true, :url => url_for(:controller => "payment_infos", :action => "payment_info_index")},
                     id:"record", class: "w3-button w3-white w3-border w3-border-purple w3-round-large",
                     style: "width:auto; height:35px; float:right", remote:true %>

    </div>
  </div>
  <br>
  <div class="table-responsive-md">
    <br>
    <table class=" w3-responsive table-striped w3-table-all table-bordered w3-hoverable w3-card-4">
      <thead>
      <tr class="w3-vpos-purple">
<!--        <th></th>-->
        <th>Merchant Name (Merchant Alias)</th>
        <th>Division Name</th>
        <th>Customer No.</th>
        <th>Trans. ID</th>
        <th>Source</th>
        <th>Type</th>
        <th>Status</th>
        <th>Date</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <% @payment_infos.each do |payment_info| %>

        <tr>

          <td><strong><%= payment_info.entity_division.entity_info.entity_name %> (<%= payment_info.entity_division.entity_info.entity_alias %>)</strong></td>
          <td><strong><%= payment_info.entity_division.division_name %> (<%= payment_info.entity_division.division_alias %>)</strong></td>
          <td><strong><%= payment_info.customer_number %></strong></td>
          <td><strong><%= payment_info.processing_id %></strong></td>
          <td><strong><%= payment_info.src %></strong></td>
          <td><strong><%= payment_info.trans_type %></strong></td>
          <% status = payment_info.trans_status.present? ? payment_info.trans_status.split("/") : "nil" %>
          <% logger.info "Status :: #{status.inspect}" %>
          <% if status[0] == "000" %>
            <td><strong>Success</strong></td>
          <% elsif status == "nil" %>
            <td><strong>Pending</strong></td>
          <% else %>
            <td><strong>Failed</strong></td>
          <% end %>


          <td><strong><%= payment_info.created_at %></strong></td>
          <td><%= link_to 'VIEW', payment_info_path(payment_info, count: params[:count], page: params[:page]),
                          style: "width:100px; height: 30px;",
                          class: 'w3-button w3-purple-vpos w3-border w3-border-purple w3-tiny w3-round-large', remote:true%></td>
        </tr>

      <% end %>

      </tbody>
    </table>
    <br>
    <div  style="float: right">
      <%= will_paginate @payment_infos, class: "w3-card-4", renderer: BootstrapPagination::Rails, :params => { :controller => "payment_infos", :action => "payment_info_index", count: params[:count], page: params[:page] } %>
      <%#= js_will_paginate @academic_years, :params => { :controller => "academic_years", :action => "aca_year_index" } %>
    </div>
  </div>


</div>


<script>
    $(function(){
        $('.pagination a').attr('data-remote', 'true')
    });

</script>
